<script>

  function makeSomeMaps() {
    pathSource = 0;

    map = d3.carto.map();

    d3.select("#map").call(map);

    map.centerOn([-88,39],"latlong").setScale(2).clusteringTolerance(1);

    regionLayer = d3.carto.layer.topojson();
    regionLayer
    .path("world.topojson")
    .label("Countries")
    .cssClass("country")
    .renderMode("svg")
    .on("recluster", recolorClusters)
    .specificFeature("countries")
    .cluster(true);
    
    map.addCartoLayer(regionLayer);

    map.refresh();
    
    function recolorClusters() {
        var clusterColor = d3.scale.category20b();

    regionLayer.clusterLayer().g()
    .selectAll("path")
    .style("fill", function(d,i) {return !d.properties.node.leaf ? clusterColor(i%19) : "lightgray"})
    .style("stroke", function(d,i) {return !d.properties.node.leaf ? "black" : "white"})
    .style("stroke-width", function(d,i) {return !d.properties.node.leaf ? "2px" : "1px"})

    d3.selectAll("g.marker").style("pointer-events", "none")
    }

  }
  
  
  

</script>
<body onload="makeSomeMaps()">
<div id="map">
</div>
<footer>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8" type="text/javascript"></script>
<script src="http://d3js.org/topojson.v1.min.js" type="text/javascript">
</script>
<script src="http://d3js.org/d3.geo.projection.v0.min.js" type="text/javascript">
</script>
<script src="http://bl.ocks.org/emeeks/raw/f3105fda25ff785dc5ed/tile.js" type="text/javascript">
</script>
<script src="http://bl.ocks.org/emeeks/raw/f3105fda25ff785dc5ed/d3.quadtiles.js" type="text/javascript">
</script>
<script src="http://bl.ocks.org/emeeks/raw/f3105fda25ff785dc5ed/d3.geo.raster.js" type="text/javascript">
</script>
<script src="https://rawgit.com/emeeks/d3-carto-map/master/d3.carto.map.js" type="text/javascript">
</script>