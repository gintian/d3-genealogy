<script>
    d3.csv("./data_simple.csv", function(csv_data){


        var cf = crossfilter(csv_data);

        cf.country = cf.dimension(function(d) { return d.Country; });
        $("#ex1a").html(totable(cf.country.top(Infinity)));

        cf.year = cf.dimension(function(d) { return d.Year; });
        $("#ex1b").html(totable(cf.year.top(4)));

        cf.dmft = cf.dimension(function(d) { return d.DMFT; });
        $("#ex1c").html(totable(cf.dmft.top(4)));


        var f1 = cf.country.filterExact("Ireland");
        $("#ex2a").html(totable(f1.top(Infinity)));

        var f2 = cf.year.filterRange([1990,2000]);
        $("#ex2b").html(totable(f2.top(Infinity)));

        cf.country.filterAll();
        var f3 = cf.year.filterRange([1990,2000]);
        $("#ex2c").html(totable(f3.top(Infinity)));

        var f4 = cf.year.filterRange([1993,1997]);
        $("#ex2d").html(totable(f4.top(Infinity)));

        var d1 = cf.dimension(function(d) { return d.Country; });

        var f1 = d1.group();

        $("#ex2").html(JSON.stringify(f1.top(Infinity), null, 3));


    });

    function totable(json) {

        var html = "";

        json.forEach(function(row) {
            html += "<tr>";
            for (key in row) {
                  html += "<td>"+row[key]+"</td>";
            };
            html += "</tr>";

        });

        return "<table>" + html + "</table>";
    }
</script>