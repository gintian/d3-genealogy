<script>

        var width  = 600,
            height = 600;

        // Create the geographic projection
        var projection = d3.geo.mercator()
            .translate([width / 2, height / 2]);

        // Configure the path generator
        var pathGenerator = d3.geo.path()
            .projection(projection);

        var div = d3.select('#map'),
            svg = div.append('svg'),
            grp = svg.append('g');

        svg
            .attr('width', width)
            .attr('height', height);

        d3.json('countries.topojson', function(error, data) {

            if (error) {
                console.error(error);
                throw error;
            }

            var features = topojson.feature(data, data.objects.countries).features;

            // Construct a feature for South America
            // -------------------------------------

            // Filter out the countries outside South America
            var southAmerica = features.filter(function(country) {
                return country.properties.continent === 'South America';
            });

            var southAmericaFeature = {
                type: 'FeatureCollection',
                features: southAmerica
            };

            // Compute the feature bounds and centroid
            var bounds = d3.geo.bounds(southAmericaFeature),
                center = d3.geo.centroid(southAmericaFeature);

            // Compute the angular distance between bound corners
            var distance = d3.geo.distance(bounds[0], bounds[1]),
                scale = height / distance / Math.sqrt(2);

            // Update the projection scale and centroid
            projection.scale(scale).center(center);

            // Draws the countries
            var countries = grp.selectAll('path.country').data([southAmericaFeature]);
            countries.enter().append('path').classed('country', true);
            countries.attr('d', pathGenerator);
            countries.exit().remove();

        });
    </script>