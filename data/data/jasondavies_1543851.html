<script>
    var w = 500,
        active = null;
    d3.select("body").append("svg")
        .attr("width", w)
        .attr("height", w)
      .selectAll("circle")
        .data(d3.range(1000))
      .enter().append("circle")
        .attr("r", 10)
        .attr("cx", x)
        .attr("cy", x)
        .on("click", function() {
          if (active) active.classed("highlight", false);
          active = d3.select(this.parentNode.appendChild(this))
              .classed("highlight", true);
        });

    function x() {
      return Math.random() * w;
    }
  </script>